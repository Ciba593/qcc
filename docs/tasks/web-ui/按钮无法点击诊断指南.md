# æŒ‰é’®æ— æ³•ç‚¹å‡»é—®é¢˜ - è¯Šæ–­æŒ‡å—

## ğŸ” é—®é¢˜æè¿°

é…ç½®ç®¡ç†é¡µé¢çš„æŒ‰é’®æ— æ³•ç‚¹å‡»ã€‚

## ğŸ› ï¸ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: ä½¿ç”¨å‰ç«¯å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

å‰ç«¯å¼€å‘æ¨¡å¼å¯ä»¥æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå®æ—¶è°ƒè¯•ï¼š

```bash
# ç»ˆç«¯ 1 - å¯åŠ¨åç«¯ API æœåŠ¡
cd /Users/yxhpy/Desktop/project/qcc
uvx --from . qcc web start --dev --no-browser --port 8081

# ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd /Users/yxhpy/Desktop/project/qcc/qcc-web
npm run dev
```

**è®¿é—®**: http://localhost:5173

**ä¼˜ç‚¹**:
- å®æ—¶é”™è¯¯æç¤º
- React DevTools æ”¯æŒ
- çƒ­æ¨¡å—æ›¿æ¢ï¼ˆä»£ç ä¿®æ”¹å³æ—¶ç”Ÿæ•ˆï¼‰
- è¯¦ç»†çš„å †æ ˆè·Ÿè¸ª

### æ­¥éª¤ 2: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://127.0.0.1:8081
2. æŒ‰ **F12** æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ° **Console** æ ‡ç­¾
4. æŸ¥æ‰¾çº¢è‰²é”™è¯¯ä¿¡æ¯

**å¸¸è§é”™è¯¯ç±»å‹**:

#### é”™è¯¯ A: React Query é”™è¯¯
```
Error: No QueryClient set, use QueryClientProvider to set one
```
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ App.tsx ä¸­çš„ QueryClientProvider æ˜¯å¦æ­£ç¡®åŒ…è£¹

#### é”™è¯¯ B: API è¯·æ±‚å¤±è´¥
```
Failed to fetch
Network Error
```
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ: `curl http://127.0.0.1:8081/api/configs`
- æ£€æŸ¥ CORS é…ç½®

#### é”™è¯¯ C: React æ¸²æŸ“é”™è¯¯
```
Cannot read property 'xxx' of undefined
```
**è§£å†³æ–¹æ¡ˆ**: æ•°æ®ç»“æ„ä¸åŒ¹é…ï¼Œéœ€è¦æ£€æŸ¥ API è¿”å›æ ¼å¼

#### é”™è¯¯ D: ç±»å‹é”™è¯¯
```
xxx.mutate is not a function
```
**è§£å†³æ–¹æ¡ˆ**: useMutation é…ç½®é”™è¯¯

### æ­¥éª¤ 3: æ£€æŸ¥ç½‘ç»œè¯·æ±‚

åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼š

1. åˆ‡æ¢åˆ° **Network** æ ‡ç­¾
2. åˆ·æ–°é¡µé¢
3. æŸ¥æ‰¾ä»¥ä¸‹è¯·æ±‚ï¼š
   - `GET /api/configs` - åº”è¯¥è¿”å› 200
   - `GET /api/configs/default` - å¯èƒ½è¿”å› 404ï¼ˆå·²çŸ¥é—®é¢˜ï¼‰

**æ£€æŸ¥é¡¹**:
- âœ… çŠ¶æ€ç  200 = æˆåŠŸ
- âŒ çŠ¶æ€ç  404 = æ¥å£ä¸å­˜åœ¨
- âŒ çŠ¶æ€ç  500 = æœåŠ¡å™¨é”™è¯¯
- âŒ çŠ¶æ€ç  CORS = è·¨åŸŸé—®é¢˜

### æ­¥éª¤ 4: æ£€æŸ¥ DOM å…ƒç´ 

åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼š

1. åˆ‡æ¢åˆ° **Elements** æ ‡ç­¾
2. æ‰¾åˆ°æŒ‰é’®å…ƒç´ 
3. æ£€æŸ¥æŒ‰é’®çš„å±æ€§ï¼š
   - `disabled` å±æ€§ - å¦‚æœå­˜åœ¨ï¼ŒæŒ‰é’®è¢«ç¦ç”¨
   - `style` å±æ€§ - æ£€æŸ¥ `pointer-events: none` æˆ– `display: none`
   - `z-index` - æ£€æŸ¥æ˜¯å¦è¢«å…¶ä»–å…ƒç´ è¦†ç›–

**å¦‚ä½•å®šä½æŒ‰é’®**:
1. ç‚¹å‡»å¼€å‘è€…å·¥å…·å·¦ä¸Šè§’çš„é€‰æ‹©å…ƒç´ æŒ‰é’®ï¼ˆæˆ–æŒ‰ Ctrl+Shift+Cï¼‰
2. ç‚¹å‡»é¡µé¢ä¸Šæ— æ³•ç‚¹å‡»çš„æŒ‰é’®
3. æŸ¥çœ‹å³ä¾§æ˜¾ç¤ºçš„ CSS æ ·å¼

### æ­¥éª¤ 5: React DevTools æ£€æŸ¥

å¦‚æœä½¿ç”¨å‰ç«¯å¼€å‘æ¨¡å¼ (http://localhost:5173):

1. å®‰è£… [React Developer Tools](https://react.dev/learn/react-developer-tools) æµè§ˆå™¨æ‰©å±•
2. æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ° **Components** æ ‡ç­¾
3. æ‰¾åˆ° `Configs` ç»„ä»¶
4. æŸ¥çœ‹å³ä¾§çš„ State å’Œ Propsï¼š
   - `isLoading` - å¦‚æœä¸º trueï¼Œå¯èƒ½å¯¼è‡´æŒ‰é’®ç¦ç”¨
   - `configs` - åº”è¯¥æ˜¯æ•°ç»„
   - mutations (createMutation, deleteMutation ç­‰) - æ£€æŸ¥ `isPending` çŠ¶æ€

## ğŸ› å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æ‰€æœ‰æŒ‰é’®éƒ½æ— æ³•ç‚¹å‡»

**å¯èƒ½åŸå› **:
- é¡µé¢æœ‰ JavaScript é”™è¯¯å¯¼è‡´ React æ¸²æŸ“å¤±è´¥
- CSS å±‚çº§é—®é¢˜ï¼Œæœ‰å…ƒç´ è¦†ç›–åœ¨æŒ‰é’®ä¸Š

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Console æ˜¯å¦æœ‰é”™è¯¯
2. åœ¨ Elements æ ‡ç­¾ä¸­æ£€æŸ¥æŒ‰é’®çš„ z-index
3. å°è¯•åˆ é™¤ `pointer-events: none` æ ·å¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

### é—®é¢˜ 2: åªæœ‰è¡¨æ ¼å†…çš„æŒ‰é’®æ— æ³•ç‚¹å‡»

**å¯èƒ½åŸå› **:
- Table ç»„ä»¶çš„ `dataSource` æ ¼å¼ä¸æ­£ç¡®
- `rowKey` è®¾ç½®ä¸æ­£ç¡®å¯¼è‡´æ¸²æŸ“å¼‚å¸¸

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `configs` æ•°æ®ç»“æ„
2. ç¡®è®¤æ¯ä¸ªé…ç½®éƒ½æœ‰ `name` å­—æ®µ

### é—®é¢˜ 3: æ¨¡æ€æ¡†æŒ‰é’®æ— æ³•ç‚¹å‡»

**å¯èƒ½åŸå› **:
- Modal çš„ `open` çŠ¶æ€å¼‚å¸¸
- Form éªŒè¯é˜»æ­¢äº†æäº¤

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `isCreateModalOpen` ç­‰çŠ¶æ€
2. å°è¯•å¡«å†™å®Œæ•´çš„è¡¨å•å†ç‚¹å‡»

### é—®é¢˜ 4: æŒ‰é’®å¯ä»¥æ‚¬åœä½†æ— æ³•ç‚¹å‡»

**å¯èƒ½åŸå› **:
- CSS `pointer-events: none`
- æœ‰é€æ˜å…ƒç´ è¦†ç›–åœ¨æŒ‰é’®ä¸Šæ–¹

**è§£å†³æ–¹æ¡ˆ**:
åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š
```javascript
// ç§»é™¤æ‰€æœ‰ pointer-events é™åˆ¶
document.querySelectorAll('*').forEach(el => {
  if (window.getComputedStyle(el).pointerEvents === 'none') {
    el.style.pointerEvents = 'auto';
    console.log('Fixed:', el);
  }
});
```

## ğŸ”§ å¿«é€Ÿä¿®å¤å°è¯•

### ä¿®å¤ 1: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

```bash
# Chrome
# Ctrl+Shift+Delete (Windows) æˆ– Cmd+Shift+Delete (Mac)
# é€‰æ‹©"ç¼“å­˜çš„å›¾åƒå’Œæ–‡ä»¶"
# ç‚¹å‡»"æ¸…é™¤æ•°æ®"
```

### ä¿®å¤ 2: å¼ºåˆ¶åˆ·æ–°é¡µé¢

```bash
# Ctrl+Shift+R (Windows)
# Cmd+Shift+R (Mac)
```

### ä¿®å¤ 3: é‡æ–°æ„å»ºå‰ç«¯

```bash
cd /Users/yxhpy/Desktop/project/qcc/qcc-web
rm -rf dist node_modules/.vite
npm run build
cp -r dist/* ../fastcc/web/static/
```

## ğŸ“Š è¯Šæ–­æ£€æŸ¥æ¸…å•

è¯·æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®å¹¶æŠ¥å‘Šç»“æœï¼š

- [ ] åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Ÿ
  ```bash
  curl http://127.0.0.1:8081/api/configs
  ```

- [ ] æµè§ˆå™¨ Console æ ‡ç­¾æ˜¯å¦æœ‰é”™è¯¯ï¼Ÿï¼ˆå¤åˆ¶é”™è¯¯ä¿¡æ¯ï¼‰

- [ ] Network æ ‡ç­¾ä¸­ API è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Ÿ

- [ ] æŒ‰é’®æ˜¯å¦æœ‰ `disabled` å±æ€§ï¼Ÿ

- [ ] æŒ‰é’®çš„ CSS æ ·å¼æ˜¯å¦æ­£å¸¸ï¼Ÿï¼ˆæ—  `pointer-events: none`ï¼‰

- [ ] React ç»„ä»¶æ˜¯å¦æ­£å¸¸æ¸²æŸ“ï¼Ÿï¼ˆæ—  JavaScript é”™è¯¯ï¼‰

## ğŸ“ éœ€è¦æä¾›çš„ä¿¡æ¯

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æµè§ˆå™¨ä¿¡æ¯**: Chrome/Firefox/Safari ç‰ˆæœ¬å·

2. **Console é”™è¯¯ä¿¡æ¯**: å®Œæ•´çš„é”™è¯¯å †æ ˆï¼ˆå¦‚æœæœ‰ï¼‰

3. **Network è¯·æ±‚**:
   - `/api/configs` çš„å“åº”çŠ¶æ€
   - å“åº”å†…å®¹ï¼ˆå‰ 100 è¡Œï¼‰

4. **æŒ‰é’®çŠ¶æ€**:
   - æ˜¯å¦æœ‰ disabled å±æ€§
   - computed CSS æ ·å¼

5. **æˆªå›¾**:
   - é¡µé¢æˆªå›¾
   - Console æˆªå›¾
   - Elements æ ‡ç­¾ä¸­æŒ‰é’®å…ƒç´ çš„æˆªå›¾

## ğŸš€ æ›¿ä»£æ–¹æ¡ˆ

å¦‚æœ Web UI æš‚æ—¶æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ CLIï¼š

```bash
# åˆ—å‡ºé…ç½®
uvx qcc list

# æ·»åŠ é…ç½®
uvx qcc add <name> -d "æè¿°" --base-url https://api.example.com --api-key sk-xxx

# ä½¿ç”¨é…ç½®
uvx qcc use <name>

# è®¾ä¸ºé»˜è®¤
uvx qcc default <name>

# åˆ é™¤é…ç½®
uvx qcc remove <name>
```

---

*å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·å°†è¯Šæ–­ä¿¡æ¯åé¦ˆç»™å¼€å‘è€…ã€‚*
